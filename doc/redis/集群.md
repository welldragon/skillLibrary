# 主从

SYNC命令，不是aof文件重放，落后很多会用RDB文件

# 哨兵（主从+故障转移）

哨兵不停给服务发送ping判定存活

选主（筛选（在线） + 打分（配置的优先级，复制进度，序号）），通知一个机器选为主

特殊模式的redis进程

故障转移

哨兵之间pub/sub

# cluster集群（扩展）

16384槽位，集群mod之后分配给各个

为什么是16384（2^14）？因为服务经常发送pingpong消息，集群数量一般不会操作1000个，保证包体积尽量小，选一个够用

服务分配给client，更新不及时MOVE命令转移请求

Redis Sentinal着眼于高可用，在master宕机时会自动将slave提升为master，继续提供服务。

Redis Cluster着眼于扩展性，在单个redis内存不足时，使用Cluster进行分片存储。