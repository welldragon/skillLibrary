feed

* 推模式（发微博后主动推送给粉丝）（推送写大，存储多分占用大）
* 拉模式（发微博放在发件箱，粉丝访问在聚合）（读多，聚合逻辑复杂）
* 推拉结合（逻辑复杂）

mysql + memcached

微博用拉模式

* 分组并行拉取
* 99%在缓存上，L1-Master-Slave
* 数据库userId分库，一主多从
* 优化redis
  * 点赞评论的count（改造数据结构，减少内存）
  * 关注的存在判断（分组后bloom过滤器）